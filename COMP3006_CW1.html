<!DOCTYPE html>
<html>
	<head>
		<style>
			body {
				background: #99ffff;
				font-family: "Verdana";
			}
			h1 {
				font-size: 36px;
			}
			.day {
				border: 1px solid #000;
				float: left;
				width: 19%;
			}
			.session {
				background: #dfdfdf;
				width: 80%;
				height: 120px;
				margin: 5%;
				padding: 5%;
			}
			.session.active {
				background: #f0fbfc;
			}
			#errors li {
				color: #ff0000;
			}
		</style>
		<title>Timetable Viewer</title>
	</head>
	<body>
		<h1>Timetable Viewer</h1>
		<div id="timetable">
			<div id="mon" class="day">
				<p>Monday</p>
				<div class="session" id="mon_9">
					<p>9am</p>
				</div>
				<div class="session" id="mon_11">
					<p>11am</p>
				</div>
				<div class="session" id="mon_14">
					<p>2pm</p>
				</div>
				<div class="session" id="mon_16">
					<p>4pm</p>
				</div>
			</div>
			<div id="tue" class="day">
				<p>Tuesday</p>
				<div class="session" id="tue_9">
					<p>9am</p>
				</div>
				<div class="session" id="tue_11">
					<p>11am</p>
				</div>
				<div class="session" id="tue_14">
					<p>2pm</p>
				</div>
				<div class="session" id="tue_16">
					<p>4pm</p>
				</div>
			</div>
			<div id="wed" class="day">
				<p>Wednesday</p>
				<div class="session" id="wed_9">
					<p>9am</p>
				</div>
				<div class="session" id="wed_11">
					<p>11am</p>
				</div>
				<div class="session" id="wed_14">
					<p>2pm</p>
				</div>
				<div class="session" id="wed_16">
					<p>4pm</p>
				</div>
			</div>
			<div id="thu" class="day">
				<p>Thursday</p>
				<div class="session" id="thu_9">
					<p>9am</p>
				</div>
				<div class="session" id="thu_11">
					<p>11am</p>
				</div>
				<div class="session" id="thu_14">
					<p>2pm</p>
				</div>
				<div class="session" id="thu_16">
					<p>4pm</p>
				</div>
			</div>
			<div id="fri" class="day">
				<p>Friday</p>
				<div class="session" id="fri_9">
					<p>9am</p>
				</div>
				<div class="session" id="fri_11">
					<p>11am</p>
				</div>
				<div class="session" id="fri_14">
					<p>2pm</p>
				</div>
				<div class="session" id="fri_16">
					<p>4pm</p>
				</div>
			</div>
		</div>
		<h2>Errors</h2>
		<ul id="errors"></ul>
		<button id="display">Display Sessions</button>
		<button id="clear">Clear Sessions</button>
	</body>
	<script>
		class Session {
			constructor(title = "", sessionTime = new Date(), staff = "") {
				this.title = title;
				this.sessionTime = sessionTime;
				this.staff = staff;
			}

			getSessionId() {
				let days = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
				let current = this.sessionTime.getDay();
				let day = days[current];
				let hour = this.sessionTime.getHours();
				return `${day}_${hour}`;
			}

			renderSession() {
				let id = this.getSessionId();
				let titleID = id + "_title";
				let staffID = id + "_staff";

				let titleElement = document.createElement("p");
				titleElement.id = titleID;
				titleElement.textContent = this.title;
				
				let staffElement = document.createElement("p");
				staffElement.id = staffID;
				staffElement.textContent = this.staff;

				let session = document.getElementById(id);

				session.appendChild(titleElement);
				session.appendChild(staffElement);

				session.classList.add("active");
			}
		}

		class Timetable {
			constructor(sessions = []) {
				this.sessions = sessions;
			}

			displayTimetable() {
				this.clearTimetable();
				this.sessions.map(session => {
					session.renderSession();
				});
			}

			clearTimetable() {
				this.sessions.map(session => {
					let id = session.getSessionId();
					let sessionElement = document.getElementById(id);
					let elements = sessionElement.getElementsByTagName("p");
					while(typeof elements[1] !== "undefined") {
						elements[1].remove();
					}
				});
			}
		}

		let session1 = new Session("COMP3006 Lecture", new Date(2021, 9, 8, 11, 30, 30, 0), "David Walker");
		let session2 = new Session("COMP3006 Lecture", new Date(2021, 9, 4, 14, 30, 30, 0), "David Walker");
		let timetable = new Timetable([session1, session2]);

		let buttonDisplay = document.getElementById("display");
		let buttonClear = document.getElementById("clear");

		buttonDisplay.addEventListener("click", () => {
			timetable.displayTimetable();
		});

		buttonClear.addEventListener("click", () => {
			timetable.clearTimetable();
		});
	</script>
</html>